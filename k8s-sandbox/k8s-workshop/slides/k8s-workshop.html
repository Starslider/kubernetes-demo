<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Kubernetes Workshop - Understanding Containers and Orchestration</title>
    <meta name="description" content="Engineering workshop covering Docker, containers, and Kubernetes fundamentals">

    <link rel="stylesheet" href="dist/reset.css">
    <link rel="stylesheet" href="dist/reveal.css">
    <link rel="stylesheet" href="dist/theme/black.css">
    <link rel="stylesheet" href="plugin/highlight/monokai.css">

    <style>
        /* Custom styling for better readability */
        .reveal {
            font-size: 32px;
        }

        .reveal h1 {
            font-size: 2.5em;
            text-transform: none;
        }

        .reveal h2 {
            font-size: 1.8em;
            text-transform: none;
            color: #42affa;
        }

        .reveal h3 {
            font-size: 1.3em;
            text-transform: none;
            color: #42affa;
        }

        .reveal pre {
            font-size: 0.55em;
            box-shadow: 0px 5px 15px rgba(0, 0, 0, 0.15);
        }

        .reveal pre code {
            padding: 20px;
            line-height: 1.4;
            max-height: 600px;
        }

        .reveal table {
            font-size: 0.7em;
            border-collapse: collapse;
            width: 100%;
        }

        .reveal table th {
            background-color: #42affa;
            color: white;
            padding: 10px;
        }

        .reveal table td {
            padding: 10px;
            border: 1px solid #42affa;
        }

        .reveal strong {
            color: #42affa;
            font-weight: bold;
        }

        .reveal section img {
            border: none;
            box-shadow: none;
            background: none;
        }

        .reveal blockquote {
            background: rgba(66, 175, 250, 0.1);
            border-left: 5px solid #42affa;
            padding: 20px;
            font-style: normal;
        }

        /* Code inline styling */
        .reveal code {
            color: #ff79c6;
        }

        /* Custom section slide styling */
        .reveal section[data-markdown*="## Section"] {
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
        }

        /* Home button */
        .home-button {
            position: fixed;
            top: 20px;
            left: 20px;
            z-index: 1000;
            background: rgba(66, 175, 250, 0.9);
            color: white;
            padding: 10px 20px;
            border-radius: 50px;
            text-decoration: none;
            font-weight: 600;
            transition: all 0.3s ease;
        }

        .home-button:hover {
            background: rgba(66, 175, 250, 1);
            transform: scale(1.05);
        }

        /* Language switcher */
        .language-switcher {
            position: fixed;
            top: 20px;
            right: 20px;
            z-index: 1000;
            display: flex;
            gap: 10px;
            background: rgba(0, 0, 0, 0.5);
            padding: 10px;
            border-radius: 50px;
        }

        .language-switcher button {
            background: none;
            border: none;
            cursor: pointer;
            font-size: 32px;
            padding: 5px;
            opacity: 0.6;
            transition: all 0.3s ease;
            border-radius: 50%;
        }

        .language-switcher button:hover {
            opacity: 1;
            transform: scale(1.1);
        }

        .language-switcher button.active {
            opacity: 1;
            background: rgba(66, 175, 250, 0.3);
        }
    </style>
</head>
<body>
    <a href="/" class="home-button">‚Üê Home</a>

    <div class="language-switcher">
        <button class="lang-btn active" data-lang="en" title="English">üá¨üáß</button>
        <button class="lang-btn" data-lang="de" title="Deutsch">üá©üá™</button>
    </div>

    <div class="reveal">
        <div class="slides">
            <section id="markdown-slides"
                     data-markdown="slides.md"
                     data-separator="^\n---\n$"
                     data-separator-vertical="^\n--\n$"
                     data-separator-notes="^Note:"
                     data-charset="utf-8">
            </section>
        </div>
    </div>

    <script src="dist/reveal.js"></script>
    <script src="plugin/markdown/markdown.js"></script>
    <script src="plugin/highlight/highlight.js"></script>
    <script src="plugin/notes/notes.js"></script>
    <script src="plugin/search/search.js"></script>
    <script src="plugin/zoom/zoom.js"></script>

    <script>
        // Language detection BEFORE Reveal initializes
        const urlParams = new URLSearchParams(window.location.search);
        const urlLang = urlParams.get('lang');
        const currentLang = urlLang || localStorage.getItem('k8s-workshop-lang') || 'en';

        // Set markdown file based on language BEFORE Reveal initializes
        const slideFile = currentLang === 'de' ? 'slides-de.md' : 'slides.md';
        document.getElementById('markdown-slides').setAttribute('data-markdown', slideFile);

        // Get the hash from URL to navigate after slides are loaded
        const targetHash = window.location.hash;

        // Initialize Reveal.js
        Reveal.initialize({
            hash: true,
            history: true,
            center: true,
            slideNumber: 'c/t',
            showSlideNumber: 'all',
            transition: 'slide',
            transitionSpeed: 'default',

            // Keyboard shortcuts
            keyboard: {
                39: 'next',
                37: 'prev',
                32: 'next'
            },

            // Plugin configuration
            plugins: [
                RevealMarkdown,
                RevealHighlight,
                RevealNotes,
                RevealSearch,
                RevealZoom
            ],

            // Markdown plugin options
            markdown: {
                smartypants: true
            },

            // Code highlighting
            highlight: {
                highlightOnLoad: true
            }
        }).then(() => {
            // After Reveal is ready and markdown is parsed, navigate to target slide
            if (targetHash && targetHash.includes('/')) {
                const hashParts = targetHash.replace('#/', '').split('/');
                const h = parseInt(hashParts[0]) || 0;
                const v = parseInt(hashParts[1]) || 0;
                Reveal.slide(h, v);
            }
        });

        // Add custom keyboard shortcut for overview (ESC or O)
        Reveal.addKeyBinding({ keyCode: 79, key: 'O' }, () => {
            Reveal.toggleOverview();
        });

        // Print slide number in console for debugging
        Reveal.on('slidechanged', event => {
            console.log(`Slide ${event.indexh + 1}`);
        });

        // Language button handlers
        const langButtons = document.querySelectorAll('.lang-btn');

        // Update active button based on current language
        langButtons.forEach(btn => {
            if (btn.dataset.lang === currentLang) {
                btn.classList.add('active');
            } else {
                btn.classList.remove('active');
            }
        });

        // Add click handlers for language switching
        langButtons.forEach(btn => {
            btn.addEventListener('click', () => {
                const lang = btn.dataset.lang;
                localStorage.setItem('k8s-workshop-lang', lang);

                // Get current slide position
                const indices = Reveal.getIndices();
                const slideHash = `${indices.h}/${indices.v || 0}`;

                // Reload page with language parameter and slide position
                window.location.href = window.location.pathname + '?lang=' + lang + '#/' + slideHash;
            });
        });
    </script>
</body>
</html>
